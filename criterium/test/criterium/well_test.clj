(ns criterium.well-test
  (:use [criterium.well])
  (:use clojure.test))

(deftest bit-shift-right-ns-test
  (is (= 4 (bit-shift-right-ns 8 1)))
  (is (= Integer/MAX_VALUE (bit-shift-right-ns int-max 1))))

(def well-1024a-res0 [0.7555646521504968 0.19296938693150878 0.5025935324374586 0.007121119415387511 0.3206049546133727 0.6226997578050941 0.19532041205093265 0.6845046859234571 0.8087562681175768 0.5690997282508761 0.5894886783789843 0.5046155452728271 0.9751246876548976 0.6914222184568644 0.3825726895593107 0.30811961530707777 0.3162773186340928 0.25978297321125865 0.1882068100385368 0.4053002488799393 0.9043356603942811 0.32395724789239466 0.6211904066149145 0.9419454524759203 0.9449770536739379 0.9217105777934194 0.4034570436924696 0.9789473409764469 0.6736162463203073 0.5853548941668123 0.5453409468755126 0.22516538621857762 0.6669957956764847 0.7062211805023253 0.34354016627185047 0.9300084430724382 0.13674178812652826 0.675577673362568 0.9510733592323959 0.2949520070105791 0.7337068577762693 0.07864327798597515 0.5205190151464194 0.38997069909237325 0.9444665557239205 0.45795420347712934 0.2416362497024238 0.6867330060340464 0.5321219067554921 0.8443026845343411 0.1273612636141479 0.4440925878006965 0.9705026806332171 0.26698391255922616 0.3004519783426076 0.16834274376742542 0.685988245299086 0.2668265213724226 0.9757483757566661 0.9247177159413695 0.7674569354858249 0.013343769125640392 0.008299330482259393 0.6560487598180771 0.816593048395589 0.7043115950655192 0.43986908346414566 0.7592308623716235 0.040754047920927405 0.27999776555225253 0.8341864652466029 0.5772025266196579 0.8917758027091622 0.5601078029721975 0.9991267474833876 0.11920967139303684 0.7340277135372162 0.7873277170583606 0.22335971146821976 0.7469482556916773 0.22395056439563632 0.4285199379082769 0.006469369865953922 0.5851125624030828 0.4061334142461419 0.3672179854474962 0.219418880995363 0.6017608169931918 0.1509036768693477 0.7893868112005293 0.31288449303247035 0.2645777799189091 0.3193615647032857 0.22134555014781654 0.4823740136343986 0.036793411476537585 0.7684427464846522 0.46402973611839116 0.43314514588564634 0.43667770689353347 0.5850964242126793 0.38665328873321414 0.6652298101689667 0.6201674710027874 0.25447412277571857 0.3283572169020772 0.9104763225186616 0.25071978801861405 0.3460737771820277 0.1901100839022547 0.1679911690298468 0.42636885214596987 0.15886777569539845 0.5018260458018631 0.8311577739659697 0.39929200266487896 0.2771829552948475 0.10446352534927428 0.24270599242299795 0.36708760308101773 0.6491420033853501 0.07084565586410463 0.6300365508068353 0.3839554046280682 0.6575432498939335 0.7175556654110551 0.7395096861291677 0.19398689735680819 0.6372492231894284 0.158453066367656 0.624662283109501 0.1218663165345788 0.025197059381753206 0.060373732121661305 0.1414467424619943 0.8914599637500942 0.8357561882585287 0.2555791118647903 0.7387337314430624 0.3943949183449149 0.5570761850103736 0.717579206218943 0.03640151396393776 0.782992908032611 0.1442157339770347 0.11787344282492995 0.660314847715199 0.20912273740395904 0.8832072992809117 0.6436884559225291 0.7820864149834961 0.6609280968550593 0.5258305622264743 0.7788030290976167 0.4238539063371718 0.4352403224911541 0.5241800183430314 0.11417777999304235 0.7686906508170068 0.14142680214717984 0.6073010405525565 0.44714760640636086 0.5588981078471988 0.11603280296549201 0.3383257696405053 0.45204067043960094 0.8788658352568746 0.1927342745475471 0.30519954510964453 0.3482908862642944 0.4364028258714825 0.13022807775996625 0.6224698822479695 0.5267538735643029 0.2802534019574523 0.835684244055301 0.9912651863414794 0.2809236270841211 0.7988971949089319 0.6870784577913582 0.8867741664871573 0.907712601358071 0.6892909298185259 0.6843732518609613 0.9055354928132147 0.8161950923968107 0.7711446485482156 0.1942125738132745 0.6105280555784702 0.902421465376392 0.7958630793727934 0.46677285991609097 0.9925589482299984 0.49840362812392414 0.15570157603360713 0.5051688989624381 0.7655096356756985 0.5824041932355613 0.8782601107377559 0.570579610299319 0.0858758797403425 0.4714239500463009 0.6287357001565397 0.012176015647128224 0.07114821881987154 0.582413146737963 0.027754488168284297 0.6287662922404706 0.17712684581056237 0.3923184243030846 0.46861305576749146 0.3010474380571395 0.5517059159465134 0.5211608030367643 0.13069019163958728 0.46851527132093906 0.4537353322375566 0.9212657301686704 0.8410076696891338 0.36046281177550554 0.8895449675619602 0.31669044960290194 0.9898941377177835 0.08242866210639477 0.6607744314242154 0.003986309748142958 0.7287824084050953 0.4094456802122295 0.5924238685984164 0.8097017053514719 0.3003195868805051 0.17480628797784448 0.9716594759374857 0.7625474957749248 0.9931910787709057 0.5338102197274566 0.78829260263592 0.048111873446032405 0.05054855695925653 0.4288309742696583 0.18000489030964673 0.8022729340009391 0.13487983914092183 0.6594261156860739 0.1937381171155721 0.07948682480491698 0.06719898898154497 0.7758951685391366 0.12151186214759946 0.3549578874371946 0.10694335028529167 0.7249686119612306 0.034047398483380675 0.7973769002128392 0.6693953268695623 0.056540791410952806 0.9503808913286775 0.2247266797348857 0.21758119203150272 0.16954494989477098 0.7755528725683689 0.47671999875456095 0.9087867012713104 0.6066615867894143 0.9130187949631363 0.7757458300329745 0.6787639046087861 0.7722544269636273 0.8862191238440573 0.6488839488010854 0.3661321687977761 0.25797038129530847 0.3972494751214981 0.5784893878735602 0.7151897584553808 0.03715417021885514 0.20087301614694297 0.11141664604656398 0.9212516350671649 0.45895271841436625 0.6172081530094147 0.8468745823483914 0.26728207105770707 0.6675534574314952 0.215640711132437 0.5401744309347123 0.5056740387808532 0.8632741565816104 0.8166575853247195 0.8680351634975523 0.5216173890512437 0.061797033064067364 0.9477440975606441 0.3782971021719277 0.36070644576102495 0.9181073615327477 0.22001777170225978 0.9402690029237419 0.05984971462748945 0.06714744144119322 0.3248397735878825 0.12915337784215808 0.7214453718625009 0.3680953304283321 0.5207683225162327 0.3164702767971903 0.46592912706546485 0.01706564868800342 0.1263738654088229 0.6285697533749044 0.6236315430141985 0.0615514216478914 0.7780995036009699 0.20336504722945392 0.8962475180160254 0.07119414140470326 0.06718915048986673 0.20575407543219626 0.5864740144461393 0.43975308630615473 0.9824135808739811 0.05022888444364071 0.26168027333915234 0.10603460925631225 0.9507736493833363 0.3369394172914326 0.5487543460913002 0.5964405362028629 0.039727029856294394 0.5600688389968127 0.27308964752592146 0.8056181429419667 0.5037669453304261 0.15922586829401553 0.9295837441459298 0.344323945697397 0.07399148819968104 0.3783202322665602 0.4550651325844228 0.5722904775757343 0.94433763041161 0.5447231694124639 0.7208280144259334 0.7500562102068216 0.9623808099422604 0.4074538985732943 0.2690850624348968 0.5638563681859523 0.10262796352617443 0.2477680144365877 0.14297585329040885 0.3442035827320069 0.7458227581810206 0.19771007332019508 0.3566648524720222 0.6700491360388696 0.513715195003897 0.9276824435219169 0.33881583041511476 0.688413605093956 0.654433774529025 0.2213877053000033 0.3943435319233686 0.7640800953377038 0.6358868142124265 0.581883414182812 0.14347550459206104 0.978092819917947 0.444108271272853 0.9932567009236664 0.8562233315315098 0.8532964903861284 0.05465809814631939 0.7031131486874074 0.5079021505080163 0.285394569626078 0.2292247221339494 0.3076238122303039 0.2446007994003594 0.9391862025950104 0.32274545822292566 0.0688715095166117 0.9091717111878097 0.9221273160073906 0.8778240298852324 0.6306535447947681 0.7219051038846374 0.9272768190130591 0.2979870829731226 0.6234900464769453 0.25014320900663733 0.06917555420659482 0.7882044278085232 0.3741772382054478 0.03388847294263542 0.04724784241989255 0.28253703843802214 0.863413778366521 0.44384941179305315 0.5789484502747655 0.16299469489604235 0.18491058400832117 0.9251435853075236 0.9041201474610716 0.38625800609588623 0.08549584378488362 0.7474953709170222 0.24932730663567781 0.35439529339782894 0.7538842514622957 0.5971153748687357 0.9230850720778108 0.3751015772577375 0.6935672552790493 0.5860141841694713 0.2577421758323908 0.9097921634092927 0.7485630193259567 0.5336604935582727 0.8526075799018145 0.3338584292214364 0.26755846408195794 0.16452790540643036 0.12203746545128524 0.28809076244942844 0.43539610342122614 0.5351749199908227 0.7366595065686852 0.5074216385837644 0.10066069127060473 0.44401570898480713 0.9631719945464283 0.5060960829723626 0.7755969970021397 0.6946522817015648 0.622231722343713 0.09502863441593945 0.8774998495355248 0.45593873760662973 0.24934913427568972 0.8637605588883162 0.36392279015854 0.29445424815639853 0.6000052525196224 0.754869501804933 0.5723027035128325 0.6703692160081118 0.25734534789808095 0.8752852398902178 0.8625927641987801 0.5714214837644249 0.8510513559449464 0.38423393853008747 0.6928380699828267 0.9245617059059441 0.4011187197174877 0.6768172681331635 0.3410445817280561 0.48728543263860047 0.8544576889835298 0.6889376011677086 0.3669116934761405 0.9808830141555518 0.16396227315999568 0.7485008628573269 0.25150786037556827 0.8567262347787619 0.9943494431208819 0.2318595563992858 0.15931490086950362 0.7880970344413072 0.4004311515018344 0.4454111475497484 0.8049112134613097 0.659513988532126 0.6869270945899189 0.8730051580350846 0.5473549445159733 0.267884774832055 0.31441421480849385 0.7702884818427265 0.6727925473824143 0.6945093285758048 0.03287728619761765 0.7582073586527258 0.9173706469591707 0.826526662800461 0.0748087705578655 0.052384020294994116 0.7692182012833655 0.47125741257332265 0.3416770545300096 0.4951580313500017 0.29688000050373375 0.8986193402670324 0.9262301037088037 0.16495887795463204 0.7712404427584261 0.7009469424374402 0.6076272109057754 0.10788102052174509 0.5975008320529014 0.5810526120476425 0.9668923146091402 0.9682649879250675 0.4528131391853094 0.33904013922438025 0.9547711247578263 0.10916815837845206 0.27618894656188786 0.7535752141848207 0.6686208914034069 0.019345402251929045 0.5708079785108566 0.7135509124491364 0.1342482678592205 0.4500692873261869 0.5260242838412523 0.27724604145623744 0.047203158028423786 0.3471950509119779 0.5208230316638947 0.5562563829589635 0.21969088283367455 0.4926070854999125 0.11484426818788052 0.6475049296859652 0.27259507519192994 0.4088108635041863 0.6945610297843814 0.5331952183041722 0.02602390549145639 0.05668114894069731 0.8983906484209001 0.7980681171175092 0.9842495447956026 0.37138081807643175 0.44817613740451634 0.14653430948965251 0.328293435042724 0.5909028775058687 0.051852585980668664 0.5309626047965139 0.15616464475169778 0.247461658436805 0.8189321781974286 0.37547166971489787 0.0024520547594875097 0.9527097463142127 0.8362732368987054 0.10794873698614538 0.8914683717302978 0.21713400236330926 0.21811435231938958 0.9813511252868921 0.6853204520884901 0.9280226475093514 0.17580619035288692 0.7518611368723214 0.6390619252342731 0.7494605074170977 9.550023823976517E-4 0.1626889507751912 0.9434123083483428 0.08510001236572862 0.9951398021075875 0.3987734855618328 0.5631283049006015 0.8100046294275671 0.1979206409305334 0.4982678396627307 0.16230163467116654 0.2724143280647695 0.9673387475777417 0.1859030667692423 0.2473264851141721 0.025224779034033418 0.13980171456933022 0.8367907286155969 0.04778134380467236 0.0019024272914975882 0.44797221361659467 0.5483753134030849 0.4879827566910535 0.9465762150939554 0.6253756200894713 0.40133296651765704 0.3452297451440245 0.7826143545098603 0.31615317706018686 0.6015399689786136 0.7171431763563305 0.7239149282686412 0.9486609974410385 0.4918237563688308 0.2412079768255353 0.7871187140699476 0.16808019042946398 0.20539209037087858 0.1654653123114258 0.24745060317218304 0.9906764447223395 0.6780416378751397 0.35415648575872183 0.6629006329458207 0.9116796688176692 0.4559391075745225 0.11041606334038079 0.2766846097074449 0.5471633428242058 0.1907645643223077 0.33126555592752993 0.8320216732099652 0.1114092767238617 0.48186866217292845 0.8638578057289124 0.6355665870942175 0.5438802263233811 0.36040451540611684 0.6713373749516904 0.3964302234817296 0.16679690382443368 0.499270795378834 0.8637193085160106 0.061108154244720936 0.4558856321964413 0.3828166981693357 0.636303436011076 0.5016614652704448 0.05376837542280555 0.8274522635620087 0.19399723154492676 0.6016310227569193 0.4179402014706284 0.5041333399713039 0.5594518741127104 0.5210877589415759 0.04799440945498645 0.2569379194173962 0.5121237640269101 0.33526887535117567 0.6449274495244026 0.6687424699775875 0.5142297735437751 0.25666187331080437 0.9993277955800295 0.7522748927585781 0.9112364307511598 0.09822610346600413 0.8092868991661817 0.11013635550625622 0.8229314149357378 0.28508140332996845 0.9270469557959586 0.07332300441339612 0.7638805550523102 0.00898260809481144 0.6322982942219824 0.3097354369238019 0.3096516279038042 0.8748664716258645 0.02619903231970966 0.7353408709168434 0.1530386672820896 0.40527300303801894 0.8478010513354093 0.24587382352910936 0.3452085554599762 0.24724601092748344 0.43039365601725876 0.791206969646737 0.6037243802566081 0.1192402271553874 0.4805405449587852 0.5577954079490155 0.4367192480713129 0.6837504550348967 0.10335447220131755 0.1435617811512202 0.6515296443831176 0.8216401739045978 0.0723428693599999 0.02252646442502737 0.158960031112656 0.31328473635949194 0.21097608003765345 0.3076917855069041 0.9788284015376121 0.7338457198347896 0.42461182619445026 0.12589112808927894 0.42618220881558955 0.5958739381749183 0.8884397419169545 0.299964586738497 0.03730473364703357 0.2662915491964668 0.4868591639678925 0.2552387216128409 0.988661585142836 0.6299099235329777 0.5607837797142565 0.8240154627710581 0.6616356542799622 0.7100805609952658 0.6646123446989805 0.40266008023172617 0.7160254665650427 0.07690791133791208 0.2835704102180898 0.14558348152786493 0.7703524536918849 0.03014729800634086 0.06727877981029451 0.37680157250724733 0.2625046060420573 0.006136440904811025 0.25914360024034977 0.8866662366781384 0.8578437478281558 0.27957644197158515 0.8081350615248084 0.40207430301234126 0.35448492178693414 0.9070351438131183 0.5920429355464876 0.8681049512233585 0.8531742042396218 0.8708263989537954 0.9781084065325558 0.14752329187467694 0.5488005294464529 0.6457502499688417 0.8142608248163015 0.9450360343325883 0.15391431376338005 0.577356917783618 0.10715358797460794 0.18042230582796037 0.4038018074352294 0.751609347993508 0.12286805780604482 0.19896953273564577 0.7437035676557571 0.22499978123232722 0.9863044694066048 0.4531559441238642 0.2740379043389112 0.46292801294475794 0.9837289205752313 0.9174044677056372 0.1161456189583987 0.12932480755262077 0.6283382405526936 0.785972599638626 0.893002551747486 0.6683821144979447 0.48597938823513687 0.7346535462420434 0.4025907658506185 0.16092061367817223 0.6518170442432165 0.12368792877532542 0.08869582670740783 0.07134998822584748 0.14498513145372272 0.9227717637550086 0.05715464102104306 0.295690682483837 0.19093898101709783 0.7125349359121174 0.7769378898665309 0.7961046474520117 0.9322317561600357 0.8330148810055107 0.17268100753426552 0.12588501977734268 0.9317147410474718 0.9756659455597401 0.21344331372529268 0.015632647089660168 0.9431237289682031 0.859583338489756 0.7412657078821212 0.7168328638654202 0.2559301645960659 0.09703678172081709 0.6400787271559238 0.3633797427173704 0.30000986135564744 0.2878304913174361 0.9400027238298208 0.3799480537418276 0.8843172821216285 0.6560051045380533 0.6653353362344205 0.4591320671606809 0.032394493697211146 0.13281420641578734 0.10863196291029453 0.8310163735877723 0.9694646673742682 0.016212739748880267 0.944929052144289 0.016071602934971452 0.6080390429124236 0.4106945467647165 0.5548939574509859 0.7357456600293517 0.021995610324665904 0.8687994643114507 0.4265273907221854 0.20938792382366955 0.8542211556341499 0.8790589557029307 0.506800695322454 0.2581303343176842 0.2501546663697809 0.49468795978464186 0.8987339914310724 0.6493606683798134 0.03351360489614308 0.5585470309015363 0.811490562511608 0.9828383987769485 0.14057071437127888 0.001633527223020792 0.11427318421192467 0.15512081235647202 0.06378560676239431 0.568412387277931 0.2654315805993974 0.7554840522352606 0.7216246470343322 0.828235893510282 0.3895577716175467 0.12386663351207972 0.33415288128890097 0.17428646329790354 0.8764232322573662 0.994880493497476 0.4323724848218262 0.3545102351345122 0.3161176657304168 0.0807878312189132 0.27392753469757736 0.0563712427392602 0.5488673080690205 0.26941023813560605 0.7795852867420763 0.699305682675913 0.9345453025307506 0.31135368742980063 0.31337152095511556 0.668668475234881 0.9941427132580429 0.8030097442679107 0.9986464083194733 0.8405935321934521 0.5569225188810378 0.7799115644302219 0.1413323301821947 0.47963172383606434 0.5704309763386846 0.4912073283921927 0.9357429542578757 0.8018140424974263 0.07972390693612397 0.6038214708678424 0.8669975902885199 0.7128381424117833 0.14792149723507464 0.5674334727227688 0.2871553448494524 0.5546456398442388 0.4027501919772476 0.8121269992552698 0.6845149411819875 0.828492168802768 0.5795849554706365 0.4528217217884958 0.2855009457562119 0.6746565706562251 0.1671252534724772 0.6259617554023862 0.7672309812624007 0.8476617166306823 0.15883506392128766 0.3732784439343959 0.4302535164169967 0.7022808252368122 0.8467318608891219 0.09239248465746641 0.21892477641813457 0.9601358626969159 0.42663405020721257 0.07931019784882665 0.22761585842818022 0.746306738583371 0.020160013809800148 0.6920021711848676 0.6762252035550773 0.37280794652178884 0.6402611255180091 0.9889494553208351 0.23268099315464497 0.5805389611050487 0.6943439054302871 0.26118701766245067 0.20282425242476165 0.9266050483565778 0.8333429330959916 0.10438607912510633 0.7062624464742839 0.5690834317356348 0.5954476820770651 0.1212741497438401 0.23927501193247736 0.1877824713010341 0.2614723739679903 0.6835239802021533 0.1367280858103186 0.2503882416058332 0.3407706816215068 0.13991061761043966 0.4394513969309628 0.37299842783249915 0.6881083531770855 0.6617652128916234 0.3356163641437888 0.633591438177973 0.2270530245732516 0.08564128843136132 0.08918673382140696 0.38108484307304025 0.2879103682935238 0.03743588551878929 0.16190698859281838 0.5442090569995344 0.9782140927854925 0.7281343133654445 0.8959968844428658 0.9710898660123348 0.9659751122817397 0.8550994270481169 0.7798358544241637 0.21895540435798466 0.47062039049342275 0.9463196953292936 0.16630126326344907 0.17202942166477442 0.060727793257683516 0.9646205923054367 0.7798067824915051 0.40155754797160625 0.6616292279213667 0.278131868224591 0.06995663419365883 0.9850121419876814 0.6142154338303953 0.30562002025544643 0.38849155488424003 0.9468732273671776 0.6018442497588694 0.3051181042101234 0.30235120351426303 0.5040468256920576 0.14324497105553746 0.05515951314009726 0.9916498868260533 0.7399833251256496 0.9040463992860168 0.6489426465705037 0.6927148157265037 0.5836423919536173 0.010520953685045242 0.1673461825121194 0.9459120449610054 0.7859659229870886 0.3802800406701863 0.3338597200345248 0.38362456066533923 0.2603508613537997 0.44760442478582263 0.8442732116673142 0.7357446802780032 0.325843742582947 0.1629238303285092 0.5950239540543407 0.7880567463580519 0.41093407361768186 0.45484352204948664 0.03207776602357626 0.794857315486297 0.24861530447378755 0.03428574767895043 0.8560385114978999 0.883311505895108 0.3438062600325793 0.46712828683666885])


(deftest well-1024a-test
  (is (= (take 1000
               (criterium.well/well-rng-1024a
                (long-array 32 [512 419 150 58 784 546 1012 939 419 520 825
                                296 222 87 357 198 534 728 325 427 300 1021
                                856 208 318 272 688 760 229 14 135 610])
                0))
         well-1024a-res0)))
